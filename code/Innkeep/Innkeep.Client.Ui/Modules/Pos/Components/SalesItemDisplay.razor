@using Innkeep.Services.Client.Interfaces.Pos
@inject ISalesItemService SalesItemService

<MudPaper Style="width:33% !important; max-width: 33% !important" Class="d-flex flex-grow-1" Elevation="0">
    <ListBox Title="Items">
        <MudStack Class="flex-grow-1" Justify="Justify.SpaceBetween" Spacing="0">
            @foreach (var item in SalesItemService.SalesItems)
            {
                <MudPaper Class="flex-grow-1 p-1 m-1">
                    <MudStack Row="true">
                        <MudStack Class="w-75 h-100">
                            <MudText>@item.Name</MudText>
                        </MudStack>
                        <MudDivider Vertical="true" FlexItem="true" Style="width: 10px; height:  100%"/>
                        <MudStack Class="p-1" Spacing="0">
                            <MudText>@item.Price</MudText>
                            <MudText>@item.Currency</MudText>
                        </MudStack>
                    </MudStack>
                    
                </MudPaper>
            }
        </MudStack>
    </ListBox>
</MudPaper>

@code {

    protected override async Task OnInitializedAsync()
    {
        SalesItemService.ItemsUpdated += async (_, _) => await InvokeAsync(StateHasChanged);
        await base.OnInitializedAsync();
    }
}